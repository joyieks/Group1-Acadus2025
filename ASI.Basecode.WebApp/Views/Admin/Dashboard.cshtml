@{
    Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
    ViewData["Title"] = "Admin Dashboard";
}

<section class="bg-[#E8F9E8]" style="padding: 24px 0;">
	<div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
		
		<!-- Welcome Section -->
		<div style="text-align:center; padding: 24px 0;">
			<h1 style="font-size:32px; font-weight:800; margin:0 0 8px 0; color:#111827;">Welcome!</h1>
			<p style="margin:0; color:#4b5563; font-size:16px;">See what's happening in your workspace today</p>
		</div>

		<!-- KPI Cards -->
		<div style="display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:24px; max-width: 900px; margin: 0 auto 24px;">
			<!-- Students Card -->
			<div style="background:#ffffff; border-radius:12px; padding:20px 24px; text-align:center; min-height: 120px; display: flex; flex-direction: column; justify-content: center;">
				<div style="display:flex; align-items:center; justify-content:center; margin-bottom:12px; color:#6b7280;">
					<span style="margin-right:8px; font-size:18px;">≡</span>
					<span style="font-size:14px; font-weight:600;">Students</span>
				</div>
				<div style="font-size:48px; font-weight:800; color:#065f46;">0</div>
			</div>

			<!-- Instructors Card -->
			<div style="background:#ffffff; border-radius:12px; padding:20px 24px; text-align:center; min-height: 120px; display: flex; flex-direction: column; justify-content: center;">
				<div style="display:flex; align-items:center; justify-content:center; margin-bottom:12px; color:#6b7280;">
					<span style="margin-right:8px; font-size:18px;">≡</span>
					<span style="font-size:14px; font-weight:600;">Instructors</span>
				</div>
				<div style="font-size:48px; font-weight:800; color:#065f46;">0</div>
			</div>

			<!-- Total Courses Card -->
			<div style="background:#ffffff; border-radius:12px; padding:20px 24px; text-align:center; min-height: 120px; display: flex; flex-direction: column; justify-content: center;">
				<div style="display:flex; align-items:center; justify-content:center; margin-bottom:12px; color:#6b7280;">
					<span style="margin-right:8px; font-size:18px;">≡</span>
					<span style="font-size:14px; font-weight:600;">Total Courses</span>
				</div>
				<div style="font-size:48px; font-weight:800; color:#065f46;">0</div>
			</div>
		</div>

	</div>
</section>

<!-- White Section with Activity Panels -->
<section style="background:#ffffff; padding: 32px 0;">
	<div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
		
		<!-- Recent Activity and Pending Tasks -->
		<div style="display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:24px; margin-bottom:32px;">
			
                   <!-- Recent Activity -->
                   <div style="background:#ffffff; border-radius:12px; padding:24px; box-shadow:0 1px 3px rgba(0,0,0,0.1);">
                       <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                           <h2 style="margin:0; font-weight:800; font-size:20px; color:#111827;">Recent activity</h2>
                           <a href="@Url.Action("RecentActivity", "Admin")" style="color:#059669; text-decoration:none; font-weight:600; font-size:14px;">View all</a>
                       </div>
				
				<div style="border-radius:8px; overflow:hidden; border:1px solid #e5e7eb;">
					<!-- Activity Item 1 -->
					<div style="background:#E8F9E8; padding:16px; border-bottom:1px solid #e5e7eb;">
						<div style="font-weight:700; color:#111827; margin-bottom:4px;">Task item title</div>
						<div style="color:#6b7280; font-size:14px; display:flex; justify-content:space-between;">
							<span>User of action</span>
							<span>MMMM DD, 00:00 XM</span>
						</div>
					</div>
					
					<!-- Activity Item 2 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb;">
						<div style="font-weight:700; color:#111827; margin-bottom:4px;">Task item title</div>
						<div style="color:#6b7280; font-size:14px; display:flex; justify-content:space-between;">
							<span>User of action</span>
							<span>MMMM DD, 00:00 XM</span>
						</div>
					</div>
					
					<!-- Activity Item 3 -->
					<div style="background:#E8F9E8; padding:16px; border-bottom:1px solid #e5e7eb;">
						<div style="font-weight:700; color:#111827; margin-bottom:4px;">Task item title</div>
						<div style="color:#6b7280; font-size:14px; display:flex; justify-content:space-between;">
							<span>User of action</span>
							<span>MMMM DD, 00:00 XM</span>
						</div>
					</div>
					
					<!-- Activity Item 4 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb;">
						<div style="font-weight:700; color:#111827; margin-bottom:4px;">Task item title</div>
						<div style="color:#6b7280; font-size:14px; display:flex; justify-content:space-between;">
							<span>User of action</span>
							<span>MMMM DD, 00:00 XM</span>
						</div>
					</div>
					
					<!-- Activity Item 5 -->
					<div style="background:#E8F9E8; padding:16px;">
						<div style="font-weight:700; color:#111827; margin-bottom:4px;">Task item title</div>
						<div style="color:#6b7280; font-size:14px; display:flex; justify-content:space-between;">
							<span>User of action</span>
							<span>MMMM DD, 00:00 XM</span>
						</div>
					</div>
				</div>
			</div>

                   <!-- Pending Tasks -->
                   <div style="background:#ffffff; border-radius:12px; padding:24px; box-shadow:0 1px 3px rgba(0,0,0,0.1);">
                       <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                           <h2 style="margin:0; font-weight:800; font-size:20px; color:#111827;">Pending tasks</h2>
                           <a href="@Url.Action("PendingTasks", "Admin")" style="color:#059669; text-decoration:none; font-weight:600; font-size:14px;">View all</a>
                       </div>
				
				<div style="border-radius:8px; overflow:hidden; border:1px solid #e5e7eb;">
					<!-- Task Item 1 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;">
						<div>
							<div style="font-weight:700; color:#111827; margin-bottom:4px;">Review new student application</div>
							<div style="color:#6b7280; font-size:14px;">Admissions Office</div>
						</div>
						<div style="display:flex; gap:8px;">
							<button onclick="showConfirmation('approve', 'Review new student application')" style="background:#76C7C0; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Approve</button>
							<button onclick="showConfirmation('reject', 'Review new student application')" style="background:#E57373; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Reject</button>
						</div>
					</div>
					
					<!-- Task Item 2 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;">
						<div>
							<div style="font-weight:700; color:#111827; margin-bottom:4px;">Approve teacher leave request</div>
							<div style="color:#6b7280; font-size:14px;">John Smith</div>
						</div>
						<div style="display:flex; gap:8px;">
							<button onclick="showConfirmation('approve', 'Approve teacher leave request')" style="background:#76C7C0; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Approve</button>
							<button onclick="showConfirmation('reject', 'Approve teacher leave request')" style="background:#E57373; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Reject</button>
						</div>
					</div>
					
					<!-- Task Item 3 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;">
						<div>
							<div style="font-weight:700; color:#111827; margin-bottom:4px;">Verify course enrollment</div>
							<div style="color:#6b7280; font-size:14px;">Jane Doe</div>
						</div>
						<div style="display:flex; gap:8px;">
							<button onclick="showConfirmation('approve', 'Verify course enrollment')" style="background:#76C7C0; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Approve</button>
							<button onclick="showConfirmation('reject', 'Verify course enrollment')" style="background:#E57373; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Reject</button>
						</div>
					</div>
					
					<!-- Task Item 4 -->
					<div style="padding:16px; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;">
						<div>
							<div style="font-weight:700; color:#111827; margin-bottom:4px;">Schedule change request</div>
							<div style="color:#6b7280; font-size:14px;">Computer Science Dept</div>
						</div>
						<div style="display:flex; gap:8px;">
							<button onclick="showConfirmation('approve', 'Schedule change request')" style="background:#76C7C0; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Approve</button>
							<button onclick="showConfirmation('reject', 'Schedule change request')" style="background:#E57373; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Reject</button>
						</div>
					</div>
					
					<!-- Task Item 5 -->
					<div style="padding:16px; display:flex; justify-content:space-between; align-items:center;">
						<div>
							<div style="font-weight:700; color:#111827; margin-bottom:4px;">Budget approval request</div>
							<div style="color:#6b7280; font-size:14px;">Finance Department</div>
						</div>
						<div style="display:flex; gap:8px;">
							<button onclick="showConfirmation('approve', 'Budget approval request')" style="background:#76C7C0; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Approve</button>
							<button onclick="showConfirmation('reject', 'Budget approval request')" style="background:#E57373; color:#fff; border:none; padding:8px 16px; border-radius:20px; cursor:pointer; font-size:13px; font-weight:600;">Reject</button>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
</section>

<!-- Green Section with Quick Management -->
<section class="bg-[#E8F9E8]" style="padding: 32px 0;">
	<div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
		
		<h2 style="text-align:center; font-weight:800; margin:0 0 24px 0; font-size:24px; color:#111827;">Quick management</h2>
		
		<div style="display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:24px; max-width:900px; margin:0 auto;">
			
			<!-- Add a student -->
			<div style="background:#ffffff; border-radius:12px; padding:32px 24px; text-align:center;">
				<h3 style="margin:0 0 20px 0; font-weight:700; font-size:18px; color:#111827;">Add a student</h3>
				<div style="height:100px; display:flex; align-items:center; justify-content:center; margin-bottom:20px;">
					<svg width="80" height="80" viewBox="0 0 80 80" fill="none" style="stroke:#111827; stroke-width:2; stroke-linecap:round; stroke-linejoin:round;">
						<!-- Graduation cap -->
						<path d="M10 30 L40 20 L70 30 L40 40 Z" fill="none"/>
						<path d="M40 40 L40 50" fill="none"/>
						<path d="M25 35 L25 45 Q25 50 40 55 Q55 50 55 45 L55 35" fill="none"/>
						<!-- Person -->
						<circle cx="40" cy="55" r="8" fill="none"/>
						<path d="M30 75 Q30 65 40 65 Q50 65 50 75" fill="none"/>
					</svg>
				</div>
				<a href="@Url.Action("AddStudent", "Admin")" style="display:inline-block; background:#76C7C0; color:#fff; border:none; padding:12px 32px; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; text-decoration:none;">Proceed</a>
			</div>

			<!-- Add faculty -->
			<div style="background:#ffffff; border-radius:12px; padding:32px 24px; text-align:center;">
				<h3 style="margin:0 0 20px 0; font-weight:700; font-size:18px; color:#111827;">Add faculty</h3>
				<div style="height:100px; display:flex; align-items:center; justify-content:center; margin-bottom:20px;">
					<svg width="80" height="80" viewBox="0 0 80 80" fill="none" style="stroke:#111827; stroke-width:2; stroke-linecap:round; stroke-linejoin:round;">
						<!-- Book -->
						<rect x="25" y="25" width="30" height="40" rx="2" fill="none"/>
						<line x1="25" y1="30" x2="55" y2="30"/>
						<line x1="30" y1="35" x2="50" y2="35"/>
						<line x1="30" y1="40" x2="50" y2="40"/>
						<line x1="30" y1="45" x2="50" y2="45"/>
					</svg>
				</div>
				<a href="@Url.Action("AddTeacher", "Admin")" style="display:inline-block; background:#76C7C0; color:#fff; border:none; padding:12px 32px; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; text-decoration:none;">Proceed</a>
			</div>

			<!-- Create a course -->
			<div style="background:#ffffff; border-radius:12px; padding:32px 24px; text-align:center;">
				<h3 style="margin:0 0 20px 0; font-weight:700; font-size:18px; color:#111827;">Create a course</h3>
				<div style="height:100px; display:flex; align-items:center; justify-content:center; margin-bottom:20px;">
					<svg width="80" height="80" viewBox="0 0 80 80" fill="none" style="stroke:#111827; stroke-width:3; stroke-linecap:round;">
						<!-- Three lines icon -->
						<line x1="20" y1="30" x2="60" y2="30"/>
						<line x1="20" y1="40" x2="60" y2="40"/>
						<line x1="20" y1="50" x2="60" y2="50"/>
					</svg>
				</div>
				<a href="@Url.Action("AddCourse", "Admin")" style="display:inline-block; background:#76C7C0; color:#fff; border:none; padding:12px 32px; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; text-decoration:none;">Proceed</a>
			</div>

		</div>

	</div>
</section>

<!-- Confirmation Modal -->
<div id="confirmationModal" class="confirmation-modal">
    <div class="confirmation-box" id="confirmationBox">
        <!-- Content will be dynamically inserted -->
    </div>
</div>

<style>
    .confirmation-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(4px);
        z-index: 10000;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.2s ease;
    }

    .confirmation-modal.show {
        display: flex;
        opacity: 1;
    }

    .confirmation-box {
        background: white;
        border-radius: 16px;
        padding: 32px;
        max-width: 400px;
        width: 90%;
        text-align: center;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        transform: scale(0.9);
        transition: transform 0.2s ease;
    }

    .confirmation-modal.show .confirmation-box {
        transform: scale(1);
    }

    .confirmation-icon {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 32px;
        font-weight: bold;
    }

    .confirmation-icon.icon-approve {
        background: #d1fae5;
        color: #059669;
    }

    .confirmation-icon.icon-reject {
        background: #fee2e2;
        color: #dc2626;
    }

    .confirmation-icon.icon-success {
        background: #d1fae5;
        color: #059669;
    }

    .confirmation-title {
        font-size: 20px;
        font-weight: 700;
        color: #111827;
        margin: 0 0 12px 0;
    }

    .confirmation-message {
        font-size: 14px;
        color: #6b7280;
        margin: 0 0 24px 0;
        line-height: 1.5;
    }

    .confirmation-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
    }
</style>

<script>
    let currentAction = '';
    let currentTask = '';

    function showConfirmation(action, taskTitle) {
        currentAction = action;
        currentTask = taskTitle;
        
        const modal = document.getElementById('confirmationModal');
        const box = document.getElementById('confirmationBox');
        
        if (action === 'approve') {
            box.innerHTML = `
                <div class="confirmation-icon icon-approve">✓</div>
                <h3 class="confirmation-title">Approve Task?</h3>
                <p class="confirmation-message">Are you sure you want to approve "${taskTitle}"?</p>
                <div class="confirmation-buttons">
                    <button onclick="closeConfirmation()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#ffffff; color:#4b5563; border:1px solid #d1d5db;">Cancel</button>
                    <button onclick="confirmAction()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#76C7C0; color:#ffffff; border:none;">Yes, Approve</button>
                </div>
            `;
        } else {
            box.innerHTML = `
                <div class="confirmation-icon icon-reject">✕</div>
                <h3 class="confirmation-title">Reject Task?</h3>
                <p class="confirmation-message">Are you sure you want to reject "${taskTitle}"?</p>
                <div class="confirmation-buttons">
                    <button onclick="closeConfirmation()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#ffffff; color:#4b5563; border:1px solid #d1d5db;">Cancel</button>
                    <button onclick="confirmAction()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#E57373; color:#ffffff; border:none;">Yes, Reject</button>
                </div>
            `;
        }
        
        modal.classList.add('show');
    }

    function closeConfirmation() {
        document.getElementById('confirmationModal').classList.remove('show');
    }

    function confirmAction() {
        const modal = document.getElementById('confirmationModal');
        const box = document.getElementById('confirmationBox');
        
        // Show success message
        if (currentAction === 'approve') {
            box.innerHTML = `
                <div class="confirmation-icon icon-success">✓</div>
                <h3 class="confirmation-title">Task Approved!</h3>
                <p class="confirmation-message">The task "${currentTask}" has been approved successfully.</p>
                <button onclick="closeConfirmation()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#059669; color:#ffffff; border:none; margin-top:8px;">Close</button>
            `;
        } else {
            box.innerHTML = `
                <div class="confirmation-icon icon-success">✓</div>
                <h3 class="confirmation-title">Task Rejected!</h3>
                <p class="confirmation-message">The task "${currentTask}" has been rejected.</p>
                <button onclick="closeConfirmation()" style="padding:10px 24px; border-radius:6px; font-size:14px; font-weight:600; cursor:pointer; background:#059669; color:#ffffff; border:none; margin-top:8px;">Close</button>
            `;
        }
        
        // TODO: Implement actual approve/reject logic here
    }

    // Close on ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeConfirmation();
        }
    });

    // Close modal when clicking outside
    document.getElementById('confirmationModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeConfirmation();
        }
    });
</script>
