@{
    Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
    ViewData["Title"] = "Courses";
}

<!-- Header Section -->
<section class="bg-[#E8F9E8]" style="padding: 32px 0; text-align:center;">
    <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
        <h1 style="font-size:28px; font-weight:800; margin:0 0 8px 0; color:#111827;">COURSES</h1>
        <p style="margin:0; color:#4b5563; font-size:14px;">Create, manage, and view all courses</p>
    </div>
</section>

<!-- Main Content Section -->
<section style="background:#f9fafb; padding: 40px 0;">
    <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
        
        <!-- Search Bar and Create Course Button -->
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; gap:16px;">
            <div style="display:flex; gap:12px; flex:1; max-width:600px;">
                <input type="text" id="courseSearch" placeholder="Search for a course ID or title" 
                       style="flex:1; padding:10px 16px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; background:#e5e7eb;">
                <button onclick="searchCourses()" 
                        style="background:#059669; color:#fff; border:none; border-radius:8px; padding:10px 24px; font-weight:600; cursor:pointer; font-size:14px;">
                    Search
                </button>
            </div>
            <a asp-controller="Admin" asp-action="AddCourse" style="background:#059669; color:#fff; border:none; border-radius:8px; padding:10px 24px; font-weight:600; cursor:pointer; text-decoration:none; font-size:14px; white-space:nowrap;">Create A Course</a>
        </div>

        <!-- Tabs -->
        <div style="background:#059669; border-radius:12px 12px 0 0; padding:0; overflow:hidden;">
            <div style="display:flex; gap:0;">
                <button class="tab-btn active" data-tab="all" 
                        style="background:transparent; color:#fff; border:none; border-bottom:3px solid #84FFC2; padding:16px 32px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s;">
                    All users
                </button>
            </div>
        </div>

        <!-- Table -->
        <div style="background:#ffffff; border-radius:0 0 12px 12px; box-shadow:0 1px 3px rgba(0,0,0,0.1);">
            <table style="width:100%; border-collapse:collapse;">
                <thead>
                    <tr style="background:#f9fafb; border-bottom:2px solid #e5e7eb;">
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">CODE</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Course Name</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">No. Enrolled</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Status</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Course 1 -->
                    <tr style="border-bottom:1px solid #e5e7eb;">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">92322</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">PHP Programming</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">35/40</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:100%; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:1000; min-width:140px; margin-right:8px;">
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Course 2 -->
                    <tr style="border-bottom:1px solid #e5e7eb;">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">91523</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Java Programming</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">28/35</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:100%; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:1000; min-width:140px; margin-right:8px;">
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Course 3 -->
                    <tr style="border-bottom:1px solid #e5e7eb;">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">90214</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Data Structures</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">40/40</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:100%; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:1000; min-width:140px; margin-right:8px;">
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Course 4 -->
                    <tr>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">89876</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Web Development</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">22/30</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#d1d5db; color:#4b5563; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Inactive</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:100%; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:1000; min-width:140px; margin-right:8px;">
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</button>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#059669;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Activate</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</section>

@section Scripts {
<script>
    // Toggle action menu
    function toggleMenu(button) {
        event.stopPropagation(); // Prevent event bubbling
        const menu = button.nextElementSibling;
        
        // Close all other menus
        document.querySelectorAll('.action-menu').forEach(m => {
            if (m !== menu) m.style.display = 'none';
        });
        
        // Toggle current menu
        if (menu.style.display === 'none' || menu.style.display === '') {
            menu.style.display = 'block';
        } else {
            menu.style.display = 'none';
        }
    }

    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
        // If click is not on a button or inside a menu
        if (!event.target.closest('button') && !event.target.closest('.action-menu')) {
            document.querySelectorAll('.action-menu').forEach(menu => {
                menu.style.display = 'none';
            });
        }
    });

    // Prevent menu from closing when clicking inside it
    document.addEventListener('click', function(event) {
        if (event.target.closest('.action-menu')) {
            event.stopPropagation();
        }
    });

    // Search functionality
    function searchCourses() {
        const searchTerm = document.getElementById('courseSearch').value.toLowerCase();
        const tableRows = document.querySelectorAll('tbody tr');
        
        tableRows.forEach(row => {
            const code = row.cells[0].textContent.toLowerCase();
            const name = row.cells[1].textContent.toLowerCase();
            
            if (code.includes(searchTerm) || name.includes(searchTerm)) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    }
</script>
}
