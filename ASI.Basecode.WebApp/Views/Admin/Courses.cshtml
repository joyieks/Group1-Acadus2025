@{
    Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
    ViewData["Title"] = "Courses";
}

<!-- Header Section -->
<section class="bg-[#E8F9E8]" style="padding: 32px 0; text-align:center;">
    <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
        <h1 style="font-size:28px; font-weight:800; margin:0 0 8px 0; color:#111827;">COURSES</h1>
        <p style="margin:0; color:#4b5563; font-size:14px;">Create, manage, and view all courses</p>
        
        <!-- KPI Cards -->
        <div style="display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:24px; margin-top:24px; max-width: 1000px; margin-left: auto; margin-right: auto;">
            <!-- Active Courses -->
            <div style="background:#ffffff; border-radius:12px; padding:24px; text-align:center; min-width: 200px; min-height: 100px; display: flex; flex-direction: column; justify-content: center;">
                <div style="display:flex; align-items:center; justify-content:center; margin-bottom:8px; color:#6b7280;">
                    <span style="margin-right:8px;">☰</span>
                    <span style="font-size:14px; font-weight:600;">Active Courses</span>
                </div>
                <div style="font-size:36px; font-weight:800; color:#065f46;">0</div>
            </div>
            
            <!-- Inactive Courses -->
            <div style="background:#ffffff; border-radius:12px; padding:24px; text-align:center; min-width: 200px; min-height: 100px; display: flex; flex-direction: column; justify-content: center;">
                <div style="display:flex; align-items:center; justify-content:center; margin-bottom:8px; color:#6b7280;">
                    <span style="margin-right:8px;">☰</span>
                    <span style="font-size:14px; font-weight:600;">Inactive Courses</span>
                </div>
                <div style="font-size:36px; font-weight:800; color:#065f46;">0</div>
            </div>
            
            <!-- Total Courses -->
            <div style="background:#ffffff; border-radius:12px; padding:24px; text-align:center; min-width: 200px; min-height: 100px; display: flex; flex-direction: column; justify-content: center;">
                <div style="display:flex; align-items:center; justify-content:center; margin-bottom:8px; color:#6b7280;">
                    <span style="margin-right:8px;">☰</span>
                    <span style="font-size:14px; font-weight:600;">Total Courses</span>
                </div>
                <div style="font-size:36px; font-weight:800; color:#065f46;">0</div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Section -->
<section style="background:#f9fafb; padding: 40px 0;">
    <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 16px;">
        
        <!-- Search Bar and Add Button -->
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; gap:16px;">
            <div style="display:flex; gap:12px; flex:1; max-width:600px;">
                <input type="text" id="courseSearch" placeholder="Search for a course ID or title" 
                       style="flex:1; padding:10px 16px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; background:#e5e7eb;">
                <button onclick="searchCourses()" 
                        style="background:#059669; color:#fff; border:none; border-radius:8px; padding:10px 24px; font-weight:600; cursor:pointer; font-size:14px;">
                    Search
                </button>
            </div>
            <a id="addStudentBtn" asp-controller="Admin" asp-action="AddStudent" style="display:none; background:#059669; color:#fff; border:none; border-radius:8px; padding:10px 24px; font-weight:600; cursor:pointer; text-decoration:none; font-size:14px; white-space:nowrap;">Add Student</a>
            <a id="addTeacherBtn" asp-controller="Admin" asp-action="AddTeacher" style="display:none; background:#059669; color:#fff; border:none; border-radius:8px; padding:10px 24px; font-weight:600; cursor:pointer; text-decoration:none; font-size:14px; white-space:nowrap;">Add Teacher</a>
        </div>

        <!-- Tabs -->
        <div style="background:#059669; border-radius:12px 12px 0 0; padding:0; overflow:hidden;">
            <div style="display:flex; gap:0;">
                <button class="tab-btn active" data-tab="all" 
                        style="background:transparent; color:#fff; border:none; border-bottom:3px solid #84FFC2; padding:16px 32px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s;">
                    All users
                </button>
                <button class="tab-btn" data-tab="students" 
                        style="background:transparent; color:rgba(255,255,255,0.7); border:none; border-bottom:3px solid transparent; padding:16px 32px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s;">
                    Students
                </button>
                <button class="tab-btn" data-tab="teachers" 
                        style="background:transparent; color:rgba(255,255,255,0.7); border:none; border-bottom:3px solid transparent; padding:16px 32px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s;">
                    Teachers
                </button>
            </div>
        </div>

        <!-- Table -->
        <div style="background:#ffffff; border-radius:0 0 12px 12px; overflow:hidden; box-shadow:0 1px 3px rgba(0,0,0,0.1);">
            <table style="width:100%; border-collapse:collapse;">
                <thead>
                    <tr style="background:#f9fafb; border-bottom:2px solid #e5e7eb;">
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">ID No.</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Name</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Role</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Department/Office</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Status</th>
                        <th style="padding:16px; text-align:left; font-weight:700; color:#111827; font-size:14px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample Row 1 - Student -->
                    <tr style="border-bottom:1px solid #e5e7eb;" data-role="Student">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123213</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Johnny Appleseed</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Student</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">CCS</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Sample Row 2 - Student -->
                    <tr style="border-bottom:1px solid #e5e7eb;" data-role="Student">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123123</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Ballerina Capuccina</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Student</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">CON</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Sample Row 3 - Teacher -->
                    <tr style="border-bottom:1px solid #e5e7eb;" data-role="Teacher">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123123</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Tungtung Tung Sahur</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Teacher</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Registrar</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#d1d5db; color:#4b5563; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Inactive</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Sample Row 4 - Student -->
                    <tr style="border-bottom:1px solid #e5e7eb;" data-role="Student">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123213</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Johnny Appleseed</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Student</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">CCS</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Sample Row 5 - Student -->
                    <tr style="border-bottom:1px solid #e5e7eb;" data-role="Student">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123123</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Ballerina Capuccina</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Student</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">CON</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#86efac; color:#065f46; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Active</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Sample Row 6 - Teacher -->
                    <tr data-role="Teacher">
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">123123</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Tungtung Tung Sahur</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Teacher</td>
                        <td style="padding:14px 16px; font-size:14px; color:#111827;">Registrar</td>
                        <td style="padding:14px 16px;">
                            <span style="background:#d1d5db; color:#4b5563; padding:4px 12px; border-radius:12px; font-size:12px; font-weight:600;">Inactive</span>
                        </td>
                        <td style="padding:14px 16px; position:relative;">
                            <button onclick="toggleMenu(this)" style="background:none; border:none; cursor:pointer; font-size:20px; padding:4px 8px;">⋮</button>
                            <div class="action-menu" style="display:none; position:absolute; right:40px; top:50%; transform:translateY(-50%); background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); z-index:10; min-width:120px;">
                                <a href="@Url.Action("ViewUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">View</a>
                                <a href="@Url.Action("EditUser", "Admin", new { id = "123213" })" style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#111827; border-bottom:1px solid #e5e7eb; text-decoration:none;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Edit</a>
                                <button style="display:block; width:100%; text-align:left; padding:10px 16px; border:none; background:none; cursor:pointer; font-size:14px; color:#dc2626;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Deactivate</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</section>

@section Scripts {
<script>
    // Toggle action menu
    function toggleMenu(button) {
        const menu = button.nextElementSibling;
        // Close all other menus
        document.querySelectorAll('.action-menu').forEach(m => {
            if (m !== menu) m.style.display = 'none';
        });
        menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
    }

    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
        if (!event.target.closest('td')) {
            document.querySelectorAll('.action-menu').forEach(menu => {
                menu.style.display = 'none';
            });
        }
    });

    // Tab switching functionality
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tableRows = document.querySelectorAll('tbody tr');
    const addStudentBtn = document.getElementById('addStudentBtn');
    const addTeacherBtn = document.getElementById('addTeacherBtn');
    
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // Remove active class from all tabs
            tabBtns.forEach(tab => {
                tab.classList.remove('active');
                tab.style.color = 'rgba(255,255,255,0.7)';
                tab.style.borderBottom = '3px solid transparent';
            });
            
            // Add active class to clicked tab
            this.classList.add('active');
            this.style.color = '#fff';
            this.style.borderBottom = '3px solid #84FFC2';
            
            // Filter table rows based on selected tab
            const tabType = this.getAttribute('data-tab');
            
            // Hide all buttons first
            addStudentBtn.style.display = 'none';
            addTeacherBtn.style.display = 'none';
            
            tableRows.forEach(row => {
                const roleCell = row.cells[2];
                const roleText = roleCell.textContent.trim();
                
                if (tabType === 'all') {
                    // Show all rows, no add button
                    row.style.display = '';
                } else if (tabType === 'students') {
                    // Show only students, show Add Student button
                    row.style.display = roleText === 'Student' ? '' : 'none';
                    addStudentBtn.style.display = 'block';
                } else if (tabType === 'teachers') {
                    // Show only teachers, show Add Teacher button
                    row.style.display = roleText === 'Teacher' ? '' : 'none';
                    addTeacherBtn.style.display = 'block';
                }
            });
        });
    });

    // Search functionality
    function searchCourses() {
        const searchTerm = document.getElementById('courseSearch').value.toLowerCase();
        
        tableRows.forEach(row => {
            const idNo = row.cells[0].textContent.toLowerCase();
            const name = row.cells[1].textContent.toLowerCase();
            
            if (idNo.includes(searchTerm) || name.includes(searchTerm)) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    }

    // Allow Enter key to trigger search
    document.getElementById('courseSearch').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            searchCourses();
        }
    });
</script>
}

